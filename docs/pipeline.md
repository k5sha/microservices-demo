<h1 align="center">Online Boutique by ExitCodeOne</h1>

<p align="center">
¬† <img src="https://github.com/k5sha/microservices-demo/actions/workflows/cd-main.yml/badge.svg" alt="Global CI/CD Pipeline">
</p>

<p align="center">
¬† <strong>Production-ready –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –≤ AWS EKS –∑ –ø–æ–≤–Ω–æ—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—î—é CI/CD</strong>
</p>


## ‚öôÔ∏è –û–ø–∏—Å CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ñ–≤


–£ –ø—Ä–æ—î–∫—Ç—ñ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ 5 –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏—Ö —Ä–æ–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ (Workflows) —á–µ—Ä–µ–∑ GitHub Actions –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞ –¥–æ–¥–∞—Ç–∫—ñ–≤.


<img width="1710" height="992" alt="Screenshot 2026-02-28 at 10 25 48" src="https://github.com/user-attachments/assets/3b4f49ca-693a-4236-896f-b5ffa8d2408f" />


## 1. üåç Global CI/CD Pipeline (`cd-main.yml`)

–¶–µ –æ—Å–Ω–æ–≤–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ–¥–∞—Ç–∫—É. –í—ñ–Ω —ñ–Ω—Ç–µ–≥—Ä—É—î **Skaffold** –¥–ª—è –∑–±—ñ—Ä–∫–∏ —Ç–∞ –¥–µ–ø–ª–æ—é.

* **Trigger:** –ü—É—à —É –≥—ñ–ª–∫–∏ `main` –∞–±–æ `staging`.
* **Build Job:**
  * –ó–±–∏—Ä–∞—î 11 –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Docker BuildKit.
  * –ü—É—à–∏—Ç—å –æ–±—Ä–∞–∑–∏ –≤ **Amazon ECR**.
  * –¢–µ–≥—É—î –æ–±—Ä–∞–∑–∏ –∑–∞ `run_number` (–¥–ª—è staging) —Ç–∞ `latest` (–¥–ª—è production).


* **Deploy Job:**
  * –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±–∏—Ä–∞—î –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä (`staging` –∞–±–æ `production`).
  * –û–Ω–æ–≤–ª—é—î `kubeconfig` —Ç–∞ –¥–µ–ø–ª–æ—ó—Ç—å –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∏ —á–µ—Ä–µ–∑ `skaffold deploy`.
* **Health Check:** –û—á—ñ–∫—É—î –Ω–∞ —É—Å–ø—ñ—à–Ω–∏–π —Å—Ç–∞—Ç—É—Å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É (`rollout status`).
* **Output:** –í–∏–≤–æ–¥–∏—Ç—å –ø—Ä—è–º–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø—Ä–∞—Ü—é—é—á–∏–π —Å–∞–π—Ç —É –ø—ñ–¥—Å—É–º–æ–∫ (Summary) –∑–∞–ø—É—Å–∫—É.

<img width="1710" height="1004" alt="image" src="https://github.com/user-attachments/assets/82da9638-cdb9-4cd4-bf61-3d75bc2721e3" />

## 2. üèó Terraform CI/CD (`terraform.yaml`)

–ö–µ—Ä—É—î "–∑–∞–ª—ñ–∑–æ–º" —Ç–∞ —Ö–º–∞—Ä–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ AWS.

* **Trigger:** –ó–º—ñ–Ω–∏ –≤ –ø–∞–ø—Ü—ñ `terraform/` –∞–±–æ —Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ (`workflow_dispatch`).
* **–ü—Ä–æ—Ü–µ—Å:**
* **Init:** –î–∏–Ω–∞–º—ñ—á–Ω–æ –æ–±–∏—Ä–∞—î S3-–±–µ–∫–µ–Ω–¥ (`backend-staging.hcl` –∞–±–æ `backend-production.hcl`).
* **Plan:** –ì–µ–Ω–µ—Ä—É—î –ø–ª–∞–Ω –∑–º—ñ–Ω —Ç–∞ –ø—É–±–ª—ñ–∫—É—î –π–æ–≥–æ —É GitHub Step Summary –¥–ª—è —Ä–µ–≤'—é.
* **Apply:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –∑–º—ñ–Ω–∏ –ª–∏—à–µ –ø—Ä–∏ –ø—É—à—ñ –≤ –≥—ñ–ª–∫–∏, –∑–∞–±–µ–∑–ø–µ—á—É—é—á–∏ –ø—ñ–¥—Ö—ñ–¥ Infrastructure as Code.

<img width="1710" height="997" alt="image" src="https://github.com/user-attachments/assets/28b91b97-7bb2-4c4f-9c72-ec374b1c88e4" />


## 3. üõ° PR Verification (`pr-check.yml`)

–°–ª—É–∂–∏—Ç—å "–≤–∞—Ä—Ç–æ–≤–∏–º" –¥–ª—è –≥—ñ–ª–∫–∏ `staging`.

* **Trigger:** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Pull Request –¥–æ –≥—ñ–ª–∫–∏ `staging`.
* **–§—É–Ω–∫—Ü—ñ—è:** –í–∏–∫–æ–Ω—É—î `skaffold build` –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `--push=false`. –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∂–æ–¥–Ω–∞ –∑–º—ñ–Ω–∞ –≤ –∫–æ–¥—ñ –Ω–µ "–∑–ª–∞–º–∞—î" –∑–±—ñ—Ä–∫—É –æ–±—Ä–∞–∑—ñ–≤ —â–µ –¥–æ —Ç–æ–≥–æ, —è–∫ –∫–æ–¥ –ø–æ—Ç—Ä–∞–ø–∏—Ç—å —É –æ—Å–Ω–æ–≤–Ω—ñ –≥—ñ–ª–∫–∏.


<img width="1710" height="993" alt="image" src="https://github.com/user-attachments/assets/ae34d636-c526-452b-92f7-883ef25cf1fc" />

## 4. üß™ Kustomize Build CI (`kustomize-build-ci.yaml`)

–í–∞–ª—ñ–¥–∞—Ü—ñ—è Kubernetes-–º–∞–Ω—ñ—Ñ–µ—Å—Ç—ñ–≤.

* **Trigger:** –ó–º—ñ–Ω–∏ —É —Ñ–∞–π–ª–∞—Ö `kustomize/**`.
* **–§—É–Ω–∫—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å YAML-—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞ –ª–æ–≥—ñ–∫—É Kustomize.
* –ë—É–¥—É—î –±–∞–∑–æ–≤–∏–π —à–∞—Ä (`kustomize build .`).
* –ü—Ä–æ—Ö–æ–¥–∏—Ç—å —Ü–∏–∫–ª–æ–º –ø–æ –≤—Å—ñ—Ö –ø—ñ–¥–ø–∞–ø–∫–∞—Ö —É `kustomize/tests`, –ø–µ—Ä–µ–≤—ñ—Ä—è—é—á–∏ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å —Ä—ñ–∑–Ω–∏—Ö –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π.

<img width="1710" height="1038" alt="image" src="https://github.com/user-attachments/assets/8669dc79-6065-4f2f-a740-3b716de38250" />

## 5. ‚ö†Ô∏è Infrastructure Destruction (`destroy-infra.yml`)

–ü–∞–π–ø–ª–∞–π–Ω –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞. –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤—Ä—É—á–Ω—É.

* **Trigger:** `workflow_dispatch` (—Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –∑ –≤–∏–±–æ—Ä–æ–º —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞).
* **–í–∞–∂–ª–∏–≤–∞ –ª–æ–≥—ñ–∫–∞:**
* **Force Clean:** –ü–µ—Ä–µ–¥ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º —Å–∞–º–æ–≥–æ EKS, –ø–∞–π–ø–ª–∞–π–Ω –ø—Ä–∏–º—É—Å–æ–≤–æ –≤–∏–¥–∞–ª—è—î `Ingress`, `LoadBalancer` —Å–µ—Ä–≤—ñ—Å–∏ —Ç–∞ `TargetGroupBindings`. –¶–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ, —â–æ–± AWS –≤—Å—Ç–∏–≥ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ñ—ñ–∑–∏—á–Ω—ñ –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫–∏ –¥–æ —Ç–æ–≥–æ, —è–∫ Terraform –≤–∏–¥–∞–ª–∏—Ç—å –º–µ—Ä–µ–∂—É (—ñ–Ω–∞–∫—à–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è VPC –∑–∞—Ñ–µ–π–ª–∏—Ç—å—Å—è).
* **Destroy:** –í–∏–∫–æ–Ω—É—î `terraform destroy` –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ö–º–∞—Ä–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤.

<img width="1710" height="1037" alt="image" src="https://github.com/user-attachments/assets/91271b02-efb8-4213-9998-aaa316f8d500" />

